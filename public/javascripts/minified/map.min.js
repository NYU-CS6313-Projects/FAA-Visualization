var mapViewModule=function(){"use strict";var a={};return a.create=function(){function a(a){if(e.node()===this)return b();e.classed("active",!1),e=d3.select(this).classed("active",!0);var f=g.bounds(a),h=f[1][0]-f[0][0],j=f[1][1]-f[0][1],k=(f[0][0]+f[1][0])/2,l=(f[0][1]+f[1][1])/2,m=.9/Math.max(h/c,j/d),n=[c/2-m*k,d/2-m*l];i.transition().duration(750).style("stroke-width",1.5/m+"px").attr("transform","translate("+n+")scale("+m+")")}function b(){e.classed("active",!1),e=d3.select(null),i.transition().duration(750).style("stroke-width","1.5px").attr("transform","translate(100,100)scale(0.6, 0.6)")}var c=475,d=510,e=d3.select(null),f=d3.geo.albersUsa().scale(1e3).translate([c/2,d/2]),g=d3.geo.path().projection(f),h=d3.select("#side-view").append("svg").attr("width",c).attr("height",d);h.append("rect").attr("class","background").attr("width",c).attr("height",d).on("click",b);var i=h.append("g").style("stroke-width","1.5px").attr("transform","translate(100,100)scale(0.6, 0.6)");d3.json("/javascripts/us.json",function(b,c){i.selectAll("path").data(topojson.feature(c,c.objects.states).features).enter().append("path").attr("d",g).attr("class","feature").on("click",a),i.append("path").datum(topojson.mesh(c,c.objects.states,function(a,b){return a!==b})).attr("class","mesh").attr("d",g)})},a.update=function(){},a}();